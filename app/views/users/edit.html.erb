<% provide(:title, "Edit account") %>
<% provide(:button_text, "Save changes") %>
<% provide(:path, user_path(@user)) %>
<% provide(:verb, :patch) %>

<h1>Your account</h1>
<div class="row">
  <div class="col-md-6 col-md-offset-3">
    <%= render 'form' %><br>
    <a href="#" class="js-payments">Your payments...</a>
    <div id="list"></div>
  </div>
</div>



<script type="text/javascript" charset="utf-8">
$(function () {
  $(".js-payments").on('click', function(event) {
    event.preventDefault();
    $.get("/payments", function(payments) {
      var paymentsString = "";
      $.each(payments, function(i, payment) {
        // var myDate = payment["created_at"].strftime('%m/%d/%Y');
        var dateTime = new Date(payment["created_at"]);
        var day = dateTime.getDate();
        var month = dateTime.getMonth() + 1;
        var year = dateTime.getFullYear();
        console.log(`${day}/${month}/${year}`)
        paymentsString += `<p data-paymentid="${payment["id"]}">` + "$" + `${payment["amount"]} ` + "spent at " + `${payment["store"]} ` + "on " + `${day}/${month}/${year}` + "</p>";
      });
      $("#list").html(paymentsString);
    });
  });
});
</script>
